class e{constructor(){this.loadedFiles=new Set,this.loadingPromises=new Map,this.init()}init(){this.setupGlobeScrollListener(),this.setupMapboxScrollListener()}setupGlobeScrollListener(){let e=!1,t=()=>{e||300<=(window.scrollY||window.pageYOffset)&&(e=!0,this.loadGlobeFunctionality(),window.removeEventListener("scroll",t,{passive:!0}))};window.addEventListener("scroll",t,{passive:!0}),300<=window.scrollY&&(e=!0,this.loadGlobeFunctionality())}setupMapboxScrollListener(){let t=!1,o=()=>{var e;t||(e=document.getElementById("globe-section"))&&e.getBoundingClientRect().top<=window.innerHeight&&(t=!0,this.loadMapboxFunctionality(),window.removeEventListener("scroll",o,{passive:!0}))};window.addEventListener("scroll",o,{passive:!0});var e=document.getElementById("globe-section");e&&e.getBoundingClientRect().top<=window.innerHeight&&(t=!0,this.loadMapboxFunctionality())}async loadGlobeFunctionality(){var e;this.loadedFiles.has("globe")||(this.loadingPromises.has("globe")?await this.loadingPromises.get("globe"):(e=this.loadScript("https://main--galeon.netlify.app/functions/globe-loader.js").then(()=>{this.loadedFiles.add("globe")}).catch(e=>{}),this.loadingPromises.set("globe",e),await e))}async loadMapboxFunctionality(){var e;this.loadedFiles.has("mapbox")||(this.loadingPromises.has("mapbox")?await this.loadingPromises.get("mapbox"):(e=this.loadScript("https://main--galeon.netlify.app/functions/mapbox-loader.js").then(()=>(this.loadedFiles.add("mapbox"),this.waitForMapboxReady())).then(()=>{}).catch(e=>{}),this.loadingPromises.set("mapbox",e),await e))}waitForMapboxReady(){return new Promise(e=>{let t=()=>{window.mapboxReady?e():setTimeout(t,50)};t()})}loadScript(i){return new Promise((e,t)=>{var o=document.createElement("script");o.src=i,o.onload=e,o.onerror=t,document.head.appendChild(o)})}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.dynamicLoader=new e}):window.dynamicLoader=new e;