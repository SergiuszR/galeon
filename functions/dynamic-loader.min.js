class DynamicLoader{constructor(){this.loadedFiles=new Set,this.loadingPromises=new Map,this.instantLoadPages=["/dealers"],this.init()}init(){this.shouldLoadInstantly()?(this.loadGlobeFunctionality(),this.loadMapboxFunctionality()):(this.setupGlobeScrollListener(),this.setupMapboxScrollListener())}shouldLoadInstantly(){var e=window.location.pathname,e=this.instantLoadPages.includes(e);return e}setupGlobeScrollListener(){let e=!1,t=()=>{e||100<=(window.scrollY||window.pageYOffset)&&(e=!0,this.loadGlobeFunctionality(),window.removeEventListener("scroll",t,{passive:!0}))};window.addEventListener("scroll",t,{passive:!0}),100<=window.scrollY&&(e=!0,this.loadGlobeFunctionality())}setupMapboxScrollListener(){let t=!1,o=()=>{var e;t||(e=document.getElementById("globe-section"))&&e.getBoundingClientRect().top<=window.innerHeight&&(t=!0,this.loadMapboxFunctionality(),window.removeEventListener("scroll",o,{passive:!0}))};window.addEventListener("scroll",o,{passive:!0});var e=document.getElementById("globe-section");e&&e.getBoundingClientRect().top<=window.innerHeight&&(t=!0,this.loadMapboxFunctionality())}async loadGlobeFunctionality(){var e;this.loadedFiles.has("globe")||(this.loadingPromises.has("globe")?await this.loadingPromises.get("globe"):(e=this.loadScript("https://main--galeon.netlify.app/functions/globe-loader.min.js").then(()=>{this.loadedFiles.add("globe")}).catch(e=>{}),this.loadingPromises.set("globe",e),await e))}async loadMapboxFunctionality(){var e;this.loadedFiles.has("mapbox")||(this.loadingPromises.has("mapbox")?await this.loadingPromises.get("mapbox"):(e=this.loadScript("https://main--galeon.netlify.app/functions/mapbox-loader.min.js").then(()=>(this.loadedFiles.add("mapbox"),this.waitForMapboxReady())).then(()=>{}).catch(e=>{}),this.loadingPromises.set("mapbox",e),await e))}waitForMapboxReady(){return new Promise(e=>{let t=()=>{window.mapboxReady?e():setTimeout(t,50)};t()})}loadScript(i){return new Promise((e,t)=>{var o=document.createElement("script");o.src=i,o.onload=e,o.onerror=t,document.head.appendChild(o)})}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{window.dynamicLoader=new DynamicLoader},100)}):setTimeout(()=>{window.dynamicLoader=new DynamicLoader},100);