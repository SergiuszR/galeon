class DynamicLoader{constructor(){this.loadedFiles=new Set,this.loadingPromises=new Map,this.init()}init(){this.setupGlobeScrollListener(),this.setupMapboxScrollListener()}setupGlobeScrollListener(){let e=!1,o=()=>{e||300<=(window.scrollY||window.pageYOffset)&&(e=!0,this.loadGlobeFunctionality(),window.removeEventListener("scroll",o,{passive:!0}))};window.addEventListener("scroll",o,{passive:!0}),300<=window.scrollY&&(e=!0,this.loadGlobeFunctionality())}setupMapboxScrollListener(){let o=!1,i=()=>{var e;o||(e=document.getElementById("globe-section"))&&e.getBoundingClientRect().top<=window.innerHeight&&(o=!0,this.loadMapboxFunctionality(),window.removeEventListener("scroll",i,{passive:!0}))};window.addEventListener("scroll",i,{passive:!0});var e=document.getElementById("globe-section");e&&e.getBoundingClientRect().top<=window.innerHeight&&(o=!0,this.loadMapboxFunctionality())}async loadGlobeFunctionality(){var e;this.loadedFiles.has("globe")||(this.loadingPromises.has("globe")?await this.loadingPromises.get("globe"):(e=this.loadScript("https://main--galeon.netlify.app/functions/globe-loader.min.js").then(()=>{this.loadedFiles.add("globe")}).catch(e=>{}),this.loadingPromises.set("globe",e),await e))}async loadMapboxFunctionality(){var e;this.loadedFiles.has("mapbox")||(this.loadingPromises.has("mapbox")?await this.loadingPromises.get("mapbox"):(e=this.loadScript("https://main--galeon.netlify.app/functions/mapbox-loader.min.js").then(()=>(this.loadedFiles.add("mapbox"),this.waitForMapboxReady())).then(()=>{}).catch(e=>{}),this.loadingPromises.set("mapbox",e),await e))}waitForMapboxReady(){return new Promise(e=>{let o=()=>{window.mapboxReady?e():setTimeout(o,50)};o()})}loadScript(t){return new Promise((e,o)=>{var i=document.createElement("script");i.src=t,i.onload=e,i.onerror=o,document.head.appendChild(i)})}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.dynamicLoader=new DynamicLoader}):window.dynamicLoader=new DynamicLoader;