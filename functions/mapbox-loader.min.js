let MAPBOX_CONFIG={accessToken:"pk.eyJ1IjoiZ2FsZW9ueWFjaHRpbmciLCJhIjoiY21kenVxc2lvMGRnNTJtc2lmYXE5dGIycSJ9.VqerV12FQZLO9Xbzs5WNUg",style:"mapbox://styles/mapbox/streets-v12",defaultCenter:[10.4515,51.1657],defaultZoom:2,countryZoomDefault:3,locationZoom:5,mapContainerId:"globe-map-container",enableDrag:!0},map=null,currentMarkers=[],mapLoaded=!1,isResetting=!1,resizeObserver=null,navigationState={currentContinent:null,currentCountry:null,currentCountryData:null},utils=(document.addEventListener("keydown",()=>{document.body.classList.add("keyboard-user")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-user")}),{createMapContainer:()=>{var e=document.createElement("div");return e.id=MAPBOX_CONFIG.mapContainerId,e.style.cssText="width:1px; height:1px; position:absolute; left:-9999px;",document.body.appendChild(e),e},disableMapControls:t=>{var e=["dragRotate","scrollZoom","touchZoomRotate","doubleClickZoom","keyboard"];MAPBOX_CONFIG.enableDrag||e.push("dragPan"),e.forEach(e=>t[e]?.disable())},parseLocationData:e=>{try{return JSON.parse(e.textContent)}catch(e){return null}},resetNavigationState:()=>{navigationState={currentContinent:null,currentCountry:null,currentCountryData:null}}});async function initializeMap(){if("undefined"==typeof mapboxgl)try{var e=document.createElement("link");e.rel="stylesheet",e.href="https://api.mapbox.com/mapbox-gl-js/v3.14.0/mapbox-gl.css",document.head.appendChild(e),await new Promise((e,t)=>{var a=document.createElement("script");a.src="https://api.mapbox.com/mapbox-gl-js/v3.14.0/mapbox-gl.js",a.onload=e,a.onerror=t,document.head.appendChild(a)})}catch(e){return}utils.createMapContainer(),(map=new mapboxgl.Map({container:MAPBOX_CONFIG.mapContainerId,style:MAPBOX_CONFIG.style,center:MAPBOX_CONFIG.defaultCenter,zoom:MAPBOX_CONFIG.defaultZoom,accessToken:MAPBOX_CONFIG.accessToken})).on("load",()=>{mapLoaded=!0,utils.disableMapControls(map),setTimeout(()=>{moveMapToParent(),attachResizeObserver(),syncMapSize(),requestAnimationFrame(syncMapSize),setTimeout(syncMapSize,350)},300)}),map.on("error",e=>{})}function moveMapToParent(){var e=document.querySelector(".globe_item_map"),t=document.getElementById(MAPBOX_CONFIG.mapContainerId);e&&t&&(t.style.position="relative",t.style.left="0",e.appendChild(t))}function syncMapSize(){var e=document.querySelector(".globe_item_map"),t=document.getElementById(MAPBOX_CONFIG.mapContainerId);e&&t&&0<(e=e.getBoundingClientRect()).width&&0<e.height&&(t.style.width=e.width+"px",t.style.height=e.height+"px",map?.resize())}function attachResizeObserver(){var e=document.querySelector(".globe_item_map");e&&(resizeObserver&&resizeObserver.disconnect(),(resizeObserver=new ResizeObserver(syncMapSize)).observe(e))}function clearMarkers(){currentMarkers.forEach(e=>e.remove()),currentMarkers=[]}function createMarkerElement(t){var e=document.createElement("div");return e.className="custom-marker",e.style.cssText="width:30px; height:30px; cursor:pointer;",e.innerHTML=`<img src="https://cdn.prod.website-files.com/6809e14c25e5cac9d89f62fe/6841b976ba7131f192625c04_Group%2075.svg" style="width:100%; height:auto; cursor:pointer;" title="${t.name}">`,e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),zoomToCoordinates(t.lng,t.lat,MAPBOX_CONFIG.locationZoom),showModal(t)}),e}async function addPoiMarkers(e){mapLoaded&&map||(await initializeMap(),mapLoaded&&map)?(clearMarkers(),currentMarkers=e.map(e=>{var t=createMarkerElement(e),a=new mapboxgl.Marker(t).setLngLat([e.lng,e.lat]).addTo(map);return t.setAttribute("data-poi-marker","true"),t.setAttribute("data-poi-id",e.name||e.lng+"-"+e.lat),a})):setTimeout(()=>addPoiMarkers(e),100)}function zoomToCoordinates(e,t,a=8){map?.flyTo({center:[e,t],zoom:a,duration:1e3})}function getAllDealersForCountry(t){var e=document.querySelectorAll(".globe_filter_item.is-loc");let a=[];return e.forEach(e=>{var e=e.querySelector('script[type="application/json"][data-element="location-data-item"]');e&&(e=utils.parseLocationData(e))?.country===t&&null!=e.lng&&null!=e.lat&&a.push({lng:parseFloat(e.lng),lat:parseFloat(e.lat),name:e.name||"Dealer Location",country:e.country})}),a}function showModal(e){var t;document.querySelectorAll(".globe_item_modal").forEach(e=>{e.style.display="none",e.classList.remove("is-open-modal")});let a=null;for(t of document.querySelectorAll('script[data-element="location-data-item"]')){var o=utils.parseLocationData(t);if(o?.lat===e.lat&&o?.lng===e.lng){a=t;break}}if(a){var n=a.closest(".globe_filter_item.is-loc")?.querySelector(".globe_item_modal");if(n){n.style.display="flex",n.classList.add("is-open-modal");var r=n.querySelector("#back-to-dealers");if(r&&(r.focus({preventScroll:!0}),window.setupNavigationAccessibility)){r=n.querySelectorAll('button, a, input, textarea, select, [tabindex]:not([tabindex="-1"])');if(0<r.length){let t=r[0],a=r[r.length-1];n.addEventListener("keydown",e=>{"Tab"===e.key&&(e.shiftKey&&document.activeElement===t?(e.preventDefault(),a.focus()):e.shiftKey||document.activeElement!==a||(e.preventDefault(),t.focus()))})}}}}}function hideModal(){document.querySelectorAll(".globe_item_modal").forEach(e=>{e.style.display="none",e.classList.remove("is-open-modal")})}async function resetToCountryView(){var e,t,a;navigationState.currentCountry&&navigationState.currentCountryData&&({lng:e,lat:t,zoom:a}=navigationState.currentCountryData,await addPoiMarkers(getAllDealersForCountry(navigationState.currentCountry)),zoomToCoordinates(parseFloat(e),parseFloat(t),a?parseInt(a):MAPBOX_CONFIG.countryZoomDefault))}async function handleContinentChange(o){if(!isResetting&&o.target.matches(".globe_radio_input")){var n=o.target.closest(".globe_filter_item");if(n?.classList.contains("is-continent")){n=n.querySelector('script[type="application/json"][data-element="location-data"]');if(n){n=utils.parseLocationData(n);if(n?.lng&&n?.lat){let e=parseFloat(n.lng),t=parseFloat(n.lat),a=n.zoom?parseInt(n.zoom):MAPBOX_CONFIG.countryZoomDefault;navigationState.currentCountry=o.target.value,navigationState.currentCountryData=n,await addPoiMarkers(getAllDealersForCountry(o.target.value)),setTimeout(()=>zoomToCoordinates(e,t,a),300)}}}}}function handleDealerClick(e){e.target.closest(".custom-marker")||e.target.closest("[data-poi-marker]")||(e=e.target.closest(".globe_item_button.is-loc"))&&(e=e.closest(".globe_filter_item")?.querySelector('script[type="application/json"][data-element="location-data-item"]'))&&(e=utils.parseLocationData(e))?.lng&&e?.lat&&(zoomToCoordinates((e={lng:parseFloat(e.lng),lat:parseFloat(e.lat),name:e.name||"Dealer Location"}).lng,e.lat,MAPBOX_CONFIG.locationZoom),showModal(e))}function handleNavigationClick(e){e=e.target;e.matches("#back-to-countries")&&(isResetting=!0,map?.flyTo({center:MAPBOX_CONFIG.defaultCenter,zoom:MAPBOX_CONFIG.defaultZoom,duration:1e3}),clearMarkers(),utils.resetNavigationState(),setTimeout(()=>isResetting=!1,1e3)),e.matches("#back-to-continents")&&(map?.flyTo({center:MAPBOX_CONFIG.defaultCenter,zoom:MAPBOX_CONFIG.defaultZoom,duration:1e3}),clearMarkers(),utils.resetNavigationState()),(e.matches("#back-to-dealers")||e.closest("#back-to-dealers"))&&(hideModal(),resetToCountryView().catch(console.error))}function setupMapboxLazyLoad(){var e=document.getElementById("globe-section");e&&e.addEventListener("click",async()=>{if(!mapLoaded&&!map){var e=document.createElement("div");e.textContent="Loading map...",e.style.cssText="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.8); color: white; padding: 20px; border-radius: 8px; z-index: 9999;",document.body.appendChild(e);try{await initializeMap()}catch(e){}finally{e.parentNode&&e.parentNode.removeChild(e)}}})}function setupNavigationAccessibility(){let i={toggleNav:document.getElementById("toggle-nav"),closeNav:document.getElementById("close-nav"),continents:document.getElementById("continents"),countries:document.getElementById("countries"),dealers:document.getElementById("dealers")},l={radioButtons:'input[type="radio"]',dealerButtons:".globe_item_button.is-loc",continentList:".globe_filter-list",dealerList:'.globe_list-list[role="list"]',backToCountries:"#back-to-countries",backToDealers:"#back-to-dealers",backToContinents:"#back-to-continents",modal:".globe_item_modal",focusable:'button, a, input, textarea, select, [tabindex]:not([tabindex="-1"])'};if(Object.values(i).every(Boolean)){let r={isElementVisible:e=>{var t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"0"!==t.opacity&&null!==e.offsetParent},isDropdownOpen:()=>"true"===i.toggleNav.getAttribute("aria-expanded"),getVisibleItems:(e,t)=>{if(e===i.dealers){var a=e.querySelector(l.dealerList);if(a)return a=a.querySelectorAll(l.dealerButtons),Array.from(a).filter(r.isElementVisible)}return Array.from(e.querySelectorAll(t)).filter(r.isElementVisible)},focusFirstVisible:(t,a,e=300)=>{document.body.classList.contains("keyboard-user")&&setTimeout(()=>{var e=r.getVisibleItems(t,a)[0];e&&e.focus()},e)}},o={continentClick:e=>{e.target.closest(l.radioButtons)&&r.focusFirstVisible(i.countries,l.radioButtons)},countryClick:e=>{e.target.closest(l.radioButtons)&&!e.target.closest(l.backToContinents)&&r.focusFirstVisible(i.dealers,l.dealerButtons)},dealerClick:e=>{e.target.closest(".custom-marker")||e.target.closest("[data-poi-marker]")||(e=e.target.closest(l.dealerButtons))&&(e=e.closest(".globe_filter_item").querySelector(l.modal))&&"none"!==e.style.display&&o.setupModalFocusTrap(e)},setupModalFocusTrap:e=>{var t=e.querySelectorAll(l.focusable),a=Array.from(t).filter(e=>"A"===e.tagName),t=Array.from(t).filter(e=>"A"!==e.tagName),a=[...a,...t],[t,a]=[a[0],a[a.length-1]],t=(t&&(t.focus(),e.addEventListener("keydown",o.modalKeydown.bind(null,t,a))),e.querySelector(l.backToDealers));t&&t.addEventListener("click",()=>{r.focusFirstVisible(i.dealers,l.dealerButtons,1200)})},modalKeydown:(e,t,a)=>{"Tab"===a.key&&(a.shiftKey&&document.activeElement===e?(a.preventDefault(),t.focus()):a.shiftKey||document.activeElement!==t||(a.preventDefault(),e.focus()))}},n={setupArrowNavigation:()=>{var e=(o,n)=>{var e=o.querySelector(l.continentList)||o.querySelector(l.dealerList);e&&e.addEventListener("keydown",e=>{var t,a;r.isDropdownOpen()&&(a=(t=r.getVisibleItems(o,n)).indexOf(document.activeElement),"ArrowDown"===e.key?(e.preventDefault(),t[a<t.length-1?a+1:0].focus()):"ArrowUp"===e.key?(e.preventDefault(),t[0<a?a-1:t.length-1].focus()):"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),document.activeElement.click()))})};e(i.continents,l.radioButtons),e(i.countries,l.radioButtons),e(i.dealers,l.dealerButtons)},setupTabNavigation:()=>{document.addEventListener("keydown",e=>{var t,a,o;"Tab"===e.key&&r.isDropdownOpen()&&(o=(t=document.activeElement).closest("#continents, #countries, #dealers"))&&(a=n.getClearButton(o),o=n.getFirstListItem(o),a)&&o&&(e.shiftKey&&t===o?(e.preventDefault(),a.focus()):e.shiftKey||t!==a||(e.preventDefault(),o.focus()))})},getClearButton:e=>e===i.continents?i.closeNav:e===i.countries?e.querySelector(l.backToContinents):e===i.dealers?e.querySelector(l.backToCountries):null,getFirstListItem:e=>{var t=e===i.dealers?l.dealerButtons:l.radioButtons;return r.getVisibleItems(e,t)[0]}},e={setup:()=>{i.closeNav&&i.closeNav.addEventListener("click",()=>{i.toggleNav.focus()});var e=i.dealers.querySelector(l.backToCountries),e=(e&&e.addEventListener("click",()=>{r.focusFirstVisible(i.countries,l.radioButtons,800)}),i.countries.querySelector(l.backToContinents));e&&e.addEventListener("click",()=>{r.focusFirstVisible(i.continents,l.radioButtons,800)})}};i.continents.addEventListener("click",o.continentClick),i.countries.addEventListener("click",o.countryClick),i.dealers.addEventListener("click",o.dealerClick),n.setupArrowNavigation(),n.setupTabNavigation(),e.setup()}}function setupToggleNavigation(){let e=document.getElementById("toggle-nav"),t=null,a=null;e&&(setTimeout(()=>e.setAttribute("aria-expanded","false"),3e3),new MutationObserver(()=>{e.classList.contains("w--open")?(t&&clearTimeout(t),a&&clearTimeout(a),setTimeout(()=>e.setAttribute("aria-expanded","true"),0)):(a&&clearTimeout(a),a=setTimeout(()=>{document.querySelectorAll('.globe_form [fs-list-element="clear"]').forEach(e=>"function"==typeof e.click&&e.click())},10),t&&clearTimeout(t),t=setTimeout(()=>{e.classList.contains("w--open")||e.setAttribute("aria-expanded","false")},1100))}).observe(e,{attributes:!0,attributeFilter:["class"]}))}document.addEventListener("change",e=>handleContinentChange(e).catch(console.error)),document.addEventListener("click",handleDealerClick),document.addEventListener("click",handleNavigationClick),window.addEventListener("resize",syncMapSize),window.setupMapboxLazyLoad=setupMapboxLazyLoad,window.setupNavigationAccessibility=setupNavigationAccessibility,window.setupToggleNavigation=setupToggleNavigation,setupMapboxLazyLoad(),setupNavigationAccessibility(),setupToggleNavigation(),window.mapboxReady=!0;